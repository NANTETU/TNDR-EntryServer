<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ライセンスキー生成</title>
    <script>
        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16).toUpperCase();
            });
        }

        function generateLicenseKey() {
            // すでにキーが保存されてるか確認
            let existingKey = localStorage.getItem("licenseKey");
            if (existingKey) {
                document.getElementById("licenseKey").innerText = `あなたのライセンスキー: ${existingKey}`;
                document.getElementById("generateBtn").disabled = true;
                return;
            }

            // 新しいライセンスキーを生成
            let newKey = generateUUID();
            localStorage.setItem("licenseKey", newKey);
            document.getElementById("licenseKey").innerText = `あなたのライセンスキー: ${newKey}`;
            document.getElementById("generateBtn").disabled = true;
        }

        window.onload = function() {
            let existingKey = localStorage.getItem("licenseKey");
            if (existingKey) {
                document.getElementById("licenseKey").innerText = `あなたのライセンスキー: ${existingKey}`;
                document.getElementById("generateBtn").disabled = true;
            }
        };
    </script>
</head>
<body>
    <h1>ライセンスキー生成</h1>
    <p id="licenseKey">まだライセンスキーは生成されていません</p>
    <button id="generateBtn" onclick="generateLicenseKey()">ライセンスキーを生成</button>
</body>
</html>
